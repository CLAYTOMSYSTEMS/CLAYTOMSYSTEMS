<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
<title>ClayTomSystems ‚Äî Galaxy Molecular Corporation</title>
<meta name="description" content="ClayTomSystems.com ‚Äî Corporate Galaxy Molecular Experience. WebGL2 3D, f√≠sica de part√≠culas real, 12K part√≠culas con optimizaci√≥n GPU, dashboard en vivo, PWA y despliegue inmediato." />
<meta http-equiv="Content-Security-Policy" content="default-src 'self' blob: data:; img-src 'self' data: blob:; media-src 'self' data: blob:; style-src 'unsafe-inline' 'self'; script-src 'self' 'unsafe-inline' blob:; connect-src 'self' https: http:; object-src 'none'; base-uri 'self'; frame-ancestors 'self'; upgrade-insecure-requests">
<meta name="theme-color" content="#0a0f19">
<link rel="icon" href="data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='64' height='64'%3e%3cradialGradient id='g'%3e%3cstop offset='0' stop-color='%2300ffe1'/%3e%3cstop offset='1' stop-color='%232b6cff'/%3e%3c/radialGradient%3e%3ccircle cx='32' cy='32' r='30' fill='url(%23g)'/%3e%3c/svg%3e">

<!-- Open Graph / Twitter -->
<meta property="og:title" content="ClayTomSystems ‚Äî Galaxy Molecular Corporation">
<meta property="og:description" content="Experiencia molecular 3D con f√≠sica real, 12K part√≠culas, glassmorphism, m√©tricas en vivo y PWA lista para producci√≥n.">
<meta property="og:type" content="website">
<meta property="og:image" content="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAQAAAB1GqotAAAAn0lEQVR4nO3QMREAAAgDoN7/0MUo1Q0bA1k9Q7w5AAAAAAAAgEq5v3m1AAAAAAAAAABg3f0gAAAAAAAAAABg3f0gAAAAAAAAAABg3f0gAAAAAAAAAABg3f0gAAAAAAAAAABg3f0gAAAAAAAAAABg3f0gAAAAAAAAAABg3f0gAAAAAAAAAABg3f0gAAAAAAAAAABg3f0gAAAAAAAAAABg3f0gAAAAAAAAAADEHpoAAZC4dU0AAAAASUVORK5CYII=">
<meta name="twitter:card" content="summary_large_image" />

<style>
  :root{
    --ink:#0d0f14; --ink-2:#0b0d12;
    --galaxy-1:#2b6cff; --galaxy-2:#7f5bff; --galaxy-3:#00ffe1;
    --glass-bg: 16,20,30; --glass-alpha:.22; --glass-blur:18px;
    --card-border: rgba(255,255,255,.12);
    --ok:#2ee6a6; --warn:#ffd166; --bad:#ff5f7a;
  }
  @media (prefers-reduced-motion: reduce) {
    * { animation-duration: .001ms !important; animation-iteration-count: 1 !important; transition-duration: .001ms !important; scroll-behavior: auto !important; }
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0; font-family: ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial;
    color:#eaf2ff; background: radial-gradient(1200px 1200px at 15% 10%, #142038 0%, #0a0f19 50%, #06080f 100%);
    overflow-x:hidden;
  }
  .galaxy-gradient{
    position:fixed; inset:-10% -10% auto -10%;
    height:130vh; pointer-events:none; z-index:-2;
    background:
      radial-gradient(1000px 700px at 80% 20%, rgba(127,91,255,.25), transparent 60%),
      radial-gradient(800px 600px at 20% 70%, rgba(0,255,225,.18), transparent 55%),
      radial-gradient(900px 900px at 50% 30%, rgba(43,108,255,.22), transparent 60%);
    filter: saturate(120%); animation: drift 26s ease-in-out infinite alternate;
  }
  @keyframes drift{to{transform:translate3d(-2%,3%,0) scale(1.03)}}
  #layer-galaxy, #layer-molecule{
    position:fixed; inset:0; pointer-events:none; z-index:-1;
  }

  header{ position:sticky; top:0; z-index:50; backdrop-filter: blur(10px);
    background: linear-gradient(to bottom, rgba(14,16,24,.7), rgba(14,16,24,.05));
    border-bottom:1px solid rgba(255,255,255,.08);
  }
  .nav{ max-width:1200px; margin:0 auto; padding:14px 18px; display:flex; gap:12px; align-items:center; justify-content:space-between; }
  .brand{ display:flex; gap:12px; align-items:center; font-weight:800; letter-spacing:.6px}
  .brand-logo{ width:34px; height:34px; border-radius:12px;
    background: conic-gradient(from 210deg, var(--galaxy-1), var(--galaxy-2), var(--galaxy-3), var(--galaxy-1));
    box-shadow: 0 0 24px rgba(127,91,255,.35), inset 0 0 18px rgba(0,255,225,.3);
  }
  .tagline{opacity:.8; font-size:.92rem}
  .nav-actions{display:flex; gap:10px; flex-wrap:wrap}
  .btn{
    appearance:none; border:1px solid rgba(255,255,255,.14); color:#eaf2ff; background:rgba(255,255,255,.04);
    padding:10px 14px; border-radius:14px; font-weight:700; cursor:pointer; transition:.25s transform,.25s background;
    backdrop-filter: blur(6px);
  }
  .btn:hover{transform:translateY(-1px); background:rgba(255,255,255,.07)}
  .btn.primary{
    border-color: transparent;
    background: linear-gradient(135deg, rgba(43,108,255,.85), rgba(127,91,255,.85));
    box-shadow: 0 10px 30px rgba(43,108,255,.25), 0 0 0 1px rgba(255,255,255,.06) inset;
  }

  .hero{ max-width:1200px; margin:48px auto 24px; padding:28px 18px; display:grid; gap:28px; grid-template-columns:1.2fr .8fr; }
  @media (max-width: 980px){ .hero{grid-template-columns:1fr} }
  .glass{ background: rgba(var(--glass-bg), var(--glass-alpha)); border:1px solid var(--card-border); border-radius:24px; backdrop-filter: blur(var(--glass-blur));
    box-shadow: 0 10px 50px rgba(0,0,0,.3), inset 0 1px 0 rgba(255,255,255,.06);
  }
  .hero-card{ padding:28px 26px 26px; position:relative; overflow:hidden }
  .hero h1{ margin:0 0 14px; font-size: clamp(2rem, 6vw, 4.2rem); line-height:1.02; letter-spacing:.5px; font-weight:1000; text-shadow: 0 8px 30px rgba(0,0,0,.55); }
  .hero h1 .stroke{ -webkit-text-stroke: 2px rgba(255,255,255,.2); text-shadow: 0 0 60px rgba(127,91,255,.4), 0 0 30px rgba(0,255,225,.25); }
  .hero p{margin:8px 0 16px; font-size:1.1rem; opacity:.9}
  .hero-stats{display:grid; grid-template-columns:repeat(3,1fr); gap:12px; margin:18px 0}
  .stat{padding:12px 14px; border-radius:14px; background:rgba(255,255,255,.06); border:1px solid rgba(255,255,255,.08)}
  .stat .k{display:block; font-weight:900; font-size:1.25rem}
  .k .mono{font-variant:tabular-nums; font-family: ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace}
  .hero-actions{display:flex; gap:10px; flex-wrap:wrap}

  .section{max-width:1200px; margin:20px auto; padding:8px 18px}
  .section h2{margin:10px 0 16px; font-size:1.6rem}
  .grid{ display:grid; gap:16px; grid-template-columns: repeat(12, 1fr); }
  .col-4{grid-column: span 4} .col-6{grid-column: span 6} .col-8{grid-column: span 8} .col-12{grid-column: span 12}
  @media (max-width: 980px){ .col-4,.col-6,.col-8,.col-12{grid-column:1/-1} }

  .tile{padding:16px; border-radius:18px; border:1px solid rgba(255,255,255,.08); background:rgba(255,255,255,.04)}
  .tile h3{margin:0 0 8px; font-size:1rem; opacity:.9}
  .metric{ display:flex; align-items:flex-end; gap:12px; justify-content:space-between }
  .metric .value{font-family: ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace; font-weight:800; font-size:1.6rem}
  .metric .badge{font-size:.78rem; padding:4px 8px; border-radius:999px; border:1px solid rgba(255,255,255,.12)}
  .badge.ok{color:var(--ok); border-color:rgba(46,230,166,.45); background:rgba(46,230,166,.1)}
  .badge.warn{color:var(--warn); border-color:rgba(255,209,102,.35); background:rgba(255,209,102,.1)}
  .badge.bad{color:var(--bad); border-color:rgba(255,95,122,.35); background:rgba(255,95,122,.08)}

  .spark{width:100%; height:48px; display:block}
  .spark path{fill: url(#grad-fill); stroke:url(#grad-stroke); stroke-width:2}

  .downloads .btn{ width:100%; text-align:center }

  footer{opacity:.75; text-align:center; padding:28px 0 60px}
  .hint{font-size:.85rem; opacity:.75}
  :focus-visible{outline: 2px solid var(--galaxy-3); outline-offset:3px}
</style>
<script>
/* ======= JSON-LD Organization ======= */
(()=>{ const ld = {
  "@context":"https://schema.org","@type":"Organization","name":"ClayTomSystems",
  "url": location.origin, "logo": location.origin + "/favicon.svg",
  "employee":[{"@type":"OrganizationRole","roleName":"Especialistas 24/7","numberedPosition":3010}],
  "slogan":"Corporaci√≥n Galaxy ‚Äî Sistemas Moleculares Aut√≥nomos",
  "foundingDate":"2025","brand":"ClayTomSystems Galaxy"
}; const s=document.createElement('script'); s.type='application/ld+json'; s.textContent=JSON.stringify(ld); document.head.appendChild(s);})();
</script>
</head>
<body>
<div class="galaxy-gradient" aria-hidden="true"></div>
<canvas id="layer-galaxy" aria-hidden="true"></canvas>
<canvas id="layer-molecule" aria-hidden="true"></canvas>

<header>
  <nav class="nav" role="navigation" aria-label="Principal">
    <div class="brand">
      <div class="brand-logo" aria-hidden="true"></div>
      <div>
        <div style="font-size:1.02rem;">ClayTomSystems</div>
        <div class="tagline">Corporaci√≥n Galaxy ‚Äî Sistemas Moleculares Aut√≥nomos</div>
      </div>
    </div>
    <div class="nav-actions">
      <button class="btn" id="modeBtn" title="Cambiar rendimiento">‚öôÔ∏è Performance</button>
      <button class="btn" id="themeBtn" title="Tema claro/oscuro">üåì Tema</button>
      <button class="btn primary" id="launchBtn">Lanzar Command Center</button>
    </div>
  </nav>
</header>

<main>
  <section class="hero">
    <article class="hero-card glass">
      <h1><span class="stroke">Galaxy Molecular</span> Experience</h1>
      <p>Arquitectura corporativa con <strong>f√≠sica de part√≠culas real</strong> y animaciones 3D WebGL2. Optimizaci√≥n GPU, seguridad nativa y m√©tricas en vivo. Preparada para gobernar ecosistemas de millones de agentes.</p>
      <div class="hero-stats" role="group" aria-label="Indicadores iniciales">
        <div class="stat">
          <span class="k"><span class="mono" id="budget">‚Ç¨4.5M</span></span>
          <small>Presupuesto vivo | escalando</small>
        </div>
        <div class="stat">
          <span class="k"><span class="mono" id="specialists">3,010</span></span>
          <small>Especialistas 24/7</small>
        </div>
        <div class="stat">
          <span class="k"><span class="mono" id="agents">52,000</span>+</span>
          <small>Agentes activados</small>
        </div>
      </div>
      <div class="hero-actions">
        <a class="btn" href="#dashboard">Ver Dashboard</a>
        <button class="btn" id="goLiveBtn">Go-Live + Pricing</button>
        <button class="btn" id="downloadAuditBtn">Descargar Activation Audit</button>
        <button class="btn" id="downloadSummaryBtn">Descargar Action Summary</button>
      </div>
    </article>

    <aside class="hero-card glass" aria-label="Integraci√≥n corporativa">
      <h3 style="margin:0 0 8px">Integraci√≥n Corporativa</h3>
      <p class="hint">Inyecta endpoints sin recompilar:</p>
      <pre class="hint" style="white-space:pre-wrap;background:rgba(0,0,0,.28);padding:10px 12px;border-radius:12px;border:1px solid rgba(255,255,255,.08)">
&lt;script&gt;
  window.CTS_CONFIG = {
    METRICS_URL: "https://api.corporacion/metrics",
    COMMAND_CENTER_URL: "https://gateway.corporacion/command-center",
    PRICING_URL: "https://claytomsystems.com/pricing"
  };
&lt;/script&gt;</pre>
      <p class="hint">Sin API ‚Üí <strong>demo mode</strong> de alta fidelidad (sint√©tico).</p>
      <div class="downloads" style="display:grid;gap:10px;margin-top:8px">
        <button class="btn" id="dlCalls">Descargar Calls API (zip)</button>
        <button class="btn" id="dlBundle">Descargar Master Bundle (zip)</button>
        <button class="btn" id="dlDocker">Descargar Dockerfile</button>
        <button class="btn" id="dlNginx">Descargar nginx.conf</button>
      </div>
    </aside>
  </section>

  <section id="dashboard" class="section">
    <h2>Dashboard de M√©tricas en Vivo</h2>
    <div class="grid">
      <div class="col-4 tile glass">
        <h3>Ingresos/min</h3>
        <div class="metric"><div class="value" id="m_revenue">‚Ç¨0</div><span class="badge ok" id="b_revenue">OK</span></div>
        <svg class="spark" viewBox="0 0 100 24" preserveAspectRatio="none">
          <defs>
            <linearGradient id="grad-stroke" x1="0" y1="0" x2="1" y2="0">
              <stop offset="0%" stop-color="#2b6cff"/><stop offset="100%" stop-color="#00ffe1"/>
            </linearGradient>
            <linearGradient id="grad-fill" x1="0" y1="0" x2="0" y2="1">
              <stop offset="0%" stop-color="rgba(43,108,255,.35)"/><stop offset="100%" stop-color="rgba(0,0,0,0)"/>
            </linearGradient>
          </defs>
          <path id="s_revenue" d=""></path>
        </svg>
      </div>

      <div class="col-4 tile glass">
        <h3>TPS (Transacciones/seg)</h3>
        <div class="metric"><div class="value" id="m_tps">0</div><span class="badge ok" id="b_tps">OK</span></div>
        <svg class="spark" viewBox="0 0 100 24" preserveAspectRatio="none"><path id="s_tps" d=""></path></svg>
      </div>

      <div class="col-4 tile glass">
        <h3>Latencia P95</h3>
        <div class="metric"><div class="value" id="m_latency">0ms</div><span class="badge ok" id="b_latency">OK</span></div>
        <svg class="spark" viewBox="0 0 100 24" preserveAspectRatio="none"><path id="s_latency" d=""></path></svg>
      </div>

      <div class="col-6 tile glass">
        <h3>Agentes Activos</h3>
        <div class="metric"><div class="value" id="m_agents">0</div><span class="badge ok" id="b_agents">OK</span></div>
        <svg class="spark" viewBox="0 0 100 24" preserveAspectRatio="none"><path id="s_agents" d=""></path></svg>
      </div>

      <div class="col-6 tile glass">
        <h3>Uptime</h3>
        <div class="metric"><div class="value" id="m_uptime">100.00%</div><span class="badge ok" id="b_uptime">OK</span></div>
        <svg class="spark" viewBox="0 0 100 24" preserveAspectRatio="none"><path id="s_uptime" d=""></path></svg>
      </div>

      <div class="col-12 tile glass">
        <h3>Logs de Eventos (√∫ltimos)</h3>
        <div id="logs" class="hint" style="height:140px; overflow:auto; border:1px dashed rgba(255,255,255,.14); padding:10px; border-radius:12px; background:rgba(255,255,255,.03)"></div>
      </div>
    </div>
  </section>

  <section class="section">
    <h2>Capacidades Galaxy</h2>
    <div class="grid">
      <div class="col-4 tile glass"><h3>‚ú¶ F√≠sica Molecular 3D</h3><p>N√∫cleo con enlaces el√°sticos (springs), c√°mara orbital y profundidad real con blending aditivo.</p></div>
      <div class="col-4 tile glass"><h3>‚ú¶ Part√≠culas GPU 12K</h3><p>Auto-ajuste por resoluci√≥n y modo rendimiento. M√≠nimo 2.000 garantizado.</p></div>
      <div class="col-4 tile glass"><h3>‚ú¶ Seguridad & Observabilidad</h3><p>Hooks para trazas/alertas, logs en tiempo real, CSP y PWA con SW de cache seguro.</p></div>
    </div>
  </section>
</main>

<footer>
  ¬© <span id="year"></span> ClayTomSystems ‚Äî Corporaci√≥n Galaxy. Todos los derechos reservados.
</footer>

<script>
/* ========================
   CONFIG / API ENDPOINTS
   ======================== */
const CFG = {
  METRICS_URL: (window.CTS_CONFIG && window.CTS_CONFIG.METRICS_URL) || null,
  COMMAND_CENTER_URL: (window.CTS_CONFIG && window.CTS_CONFIG.COMMAND_CENTER_URL) || "#",
  PRICING_URL: (window.CTS_CONFIG && window.CTS_CONFIG.PRICING_URL) || "#"
};
const DATA_EMBED = {
  // Embebidos corporativos (base64)
  auditTxt: "data:text/plain;base64,{{B64_AUDIT}}",
  summaryMd: "data:text/markdown;base64,{{B64_SUMMARY}}",
  callsZip: "data:application/zip;base64,{{B64_CALLS}}",
  masterZip: "data:application/zip;base64,{{B64_MASTER}}"
};

/* ========================
   PARALLAX / TEMA
   ======================== */
const parallax = (x,y)=>{
  const g = document.querySelector('.galaxy-gradient');
  const gx = (x-0.5)*4, gy=(y-0.5)*4;
  g && (g.style.transform = `translate3d(${gx}px,${gy}px,0) scale(1.02)`);
};
addEventListener('pointermove', e=>{ parallax(e.clientX / innerWidth, e.clientY / innerHeight); }, {passive:true});

const themeBtn = document.getElementById('themeBtn');
const applyTheme = (t)=>{ document.documentElement.style.colorScheme = t; document.body.dataset.theme=t; };
themeBtn.onclick = ()=>{ const t = (document.body.dataset.theme==='light'?'dark':'light') || 'light'; applyTheme(t); log('Tema ‚Üí ' + t.toUpperCase()); };
if(matchMedia('(prefers-color-scheme: dark)').matches) applyTheme('dark'); else applyTheme('light');

/* ========================
   HERO ACTIONS + DESCARGAS
   ======================== */
document.getElementById('launchBtn').onclick = ()=> window.open(CFG.COMMAND_CENTER_URL, '_blank');
document.getElementById('goLiveBtn').onclick = ()=> window.open(CFG.PRICING_URL, '_blank');
document.getElementById('downloadAuditBtn').onclick = ()=> triggerDownload(DATA_EMBED.auditTxt, 'ACTIVATION-AUDIT.txt');
document.getElementById('downloadSummaryBtn').onclick = ()=> triggerDownload(DATA_EMBED.summaryMd, 'CLAY-IMMEDIATE-ACTION-SUMMARY.md');
document.getElementById('dlCalls').onclick = ()=> triggerDownload(DATA_EMBED.callsZip, 'calls-api.zip');
document.getElementById('dlBundle').onclick = ()=> triggerDownload(DATA_EMBED.masterZip, 'claytomsystems-1m-master-bundle.zip');
document.getElementById('dlDocker').onclick = ()=> {
  const content = `# Dockerfile ‚Äî ClayTomSystems Galaxy
FROM nginx:alpine
COPY ./index.html /usr/share/nginx/html/index.html
COPY ./nginx.conf /etc/nginx/conf.d/default.conf
HEALTHCHECK --interval=30s --timeout=3s CMD wget -qO- http://localhost:80/ || exit 1
  `.trim();
  triggerDownload(strToDataURL(content,'text/plain'),'Dockerfile');
};
document.getElementById('dlNginx').onclick = ()=> {
  const content = `
server {
  listen 80;
  server_name _;
  add_header Content-Security-Policy "default-src 'self' blob: data:; img-src 'self' data: blob:; style-src 'self' 'unsafe-inline'; script-src 'self' 'unsafe-inline' blob:; connect-src 'self' https: http:;" always;
  root /usr/share/nginx/html;
  index index.html;
  location / { try_files $uri /index.html; }
  location ~* \\.(png|jpg|jpeg|gif|svg|ico|css|js|wasm)$ { expires 30d; access_log off; }
}
  `.trim();
  triggerDownload(strToDataURL(content,'text/plain'),'nginx.conf');
};

function triggerDownload(url, name){ const a=document.createElement('a'); a.href=url; a.download=name; a.click(); }
function strToDataURL(s, mime){ return 'data:'+(mime||'text/plain')+';charset=utf-8,' + encodeURIComponent(s); }

/* ========================
   LIVE METRICS ENGINE
   ======================== */
const metrics = {
  revenue: { el:'#m_revenue', spark:'#s_revenue', badge:'#b_revenue', fmt:v=>`‚Ç¨${(v/1).toLocaleString('es-ES')}` },
  tps:     { el:'#m_tps',     spark:'#s_tps',     badge:'#b_tps',     fmt:v=>v.toFixed(0) },
  latency: { el:'#m_latency', spark:'#s_latency', badge:'#b_latency', fmt:v=>`${v.toFixed(0)}ms` },
  agents:  { el:'#m_agents',  spark:'#s_agents',  badge:'#b_agents',  fmt:v=>v.toLocaleString('es-ES') },
  uptime:  { el:'#m_uptime',  spark:'#s_uptime',  badge:'#b_uptime',  fmt:v=>`${v.toFixed(2)}%` },
};
const historyLen = 64;
const series = {
  revenue: Array(historyLen).fill(0),
  tps: Array(historyLen).fill(0),
  latency: Array(historyLen).fill(0),
  agents: Array(historyLen).fill(0),
  uptime: Array(historyLen).fill(100),
};
const log = msg=>{
  const box=document.getElementById('logs'); const t=new Date().toLocaleTimeString('es-ES',{hour12:false});
  const div=document.createElement('div'); div.textContent=`[${t}] ${msg}`; box.prepend(div);
  while(box.children.length>120) box.removeChild(box.lastChild);
};
function sparkPath(arr){
  const mx = Math.max(...arr), mn = Math.min(...arr), rng = mx - mn || 1;
  let d = `M0 ${24 - ((arr[0]-mn)/rng)*20 -2}`;
  for(let i=1;i<arr.length;i++){
    const x = (i/(arr.length-1))*100;
    const y = 24 - ((arr[i]-mn)/rng)*20 -2;
    d += ` L${x} ${y}`;
  } return d + ` L100 24 L0 24 Z`;
}
function badge(el, v, goodLow=false){
  const c = document.querySelector(el); if(!c) return;
  c.classList.remove('ok','warn','bad'); let cls='ok';
  if(!goodLow){ if(v < 0.4) cls='bad'; else if(v < 0.7) cls='warn'; }
  else{ if(v > 0.6) cls='bad'; else if(v > 0.35) cls='warn'; }
  c.classList.add(cls);
}
async function pullMetrics(){
  try{
    if(CFG.METRICS_URL){
      const res = await fetch(CFG.METRICS_URL, {cache:'no-store'});
      const j = await res.json();
      return { revenue:+j.revenue, tps:+j.tps, latency:+j.latency, agents:+j.agents, uptime:+j.uptime };
    }
  }catch(e){ log('‚ö†Ô∏è API metrics error: ' + e.message); }
  // Demo mode (sint√©tico)
  const baseAgents = 52000, jit = (m)=>m*(0.92+Math.random()*0.16);
  return {
    revenue: Math.round(jit(180000) + Math.sin(perfNow()/1300)*40000),
    tps: Math.max(40, Math.round(jit(1200) + Math.cos(perfNow()/900)*260)),
    latency: Math.max(18, Math.round(28 + 7*Math.sin(perfNow()/500) + Math.random()*9)),
    agents: Math.round(baseAgents + Math.sin(perfNow()/1700)*2200 + Math.random()*333),
    uptime: 99.8 + Math.sin(perfNow()/5000)*0.1
  };
}
function updateUI(vals){
  Object.keys(vals).forEach(k=>{
    series[k].push(vals[k]); while(series[k].length>historyLen) series[k].shift();
    const conf = metrics[k];
    document.querySelector(conf.el).textContent = conf.fmt(vals[k]);
    document.querySelector(conf.spark).setAttribute('d', sparkPath(series[k]));
  });
  badge(metrics.revenue.badge, Math.min(1, vals.revenue/250000));
  badge(metrics.tps.badge, Math.min(1, vals.tps/1500));
  badge(metrics.latency.badge, Math.min(1, (120-vals.latency)/120), true);
  badge(metrics.agents.badge, Math.min(1, (vals.agents-30000)/40000));
  badge(metrics.uptime.badge, Math.min(1, (vals.uptime-99.0)/(99.99-99.0)));
}
function perfNow(){ return (performance.now() || Date.now()); }
(async function loopMetrics(){
  const v = await pullMetrics(); updateUI(v); setTimeout(loopMetrics, 1200);
})();
document.getElementById('year').textContent = new Date().getFullYear();

/* ========================
   GPU LAYER: GALAXY PARTICLES
   ======================== */
const galaxy = document.getElementById('layer-galaxy');
const molecule = document.getElementById('layer-molecule');
const DPR = Math.min(devicePixelRatio||1, 1.75);
const RESIZE = ()=>{
  const w=innerWidth, h=innerHeight;
  [galaxy,molecule].forEach(c=>{
    const r = DPR; c.width = Math.floor(w*r); c.height = Math.floor(h*r); c.style.width = w+'px'; c.style.height = h+'px';
  });
};
addEventListener('resize', RESIZE, {passive:true}); RESIZE();

function createGL(canvas, opts={}) {
  const gl = canvas.getContext('webgl2', { antialias:false, powerPreference:'high-performance', ...opts });
  if(!gl) { console.warn('WebGL2 no disponible'); return null; }
  const vs = (src)=>{ const s=gl.createShader(gl.VERTEX_SHADER); gl.shaderSource(s,src); gl.compileShader(s); if(!gl.getShaderParameter(s,gl.COMPILE_STATUS)) throw gl.getShaderInfoLog(s); return s; }
  const fs = (src)=>{ const s=gl.createShader(gl.FRAGMENT_SHADER); gl.shaderSource(s,src); gl.compileShader(s); if(!gl.getShaderParameter(s,gl.COMPILE_STATUS)) throw gl.getShaderInfoLog(s); return s; }
  const prog = (vsrc,fsrc)=>{ const p=gl.createProgram(); gl.attachShader(p,vs(vsrc)); gl.attachShader(p,fs(fsrc)); gl.linkProgram(p); if(!gl.getProgramParameter(p,gl.LINK_STATUS)) throw gl.getProgramInfoLog(p); return p; }
  return { gl, prog };
}

/* ---- Galaxy: puntos en v√≥rtice (auto ‚â• 2K, hasta ~12K) ---- */
const G = createGL(galaxy); if(G){
  const {gl, prog} = G;
  const VERT = `#version 300 es
  precision highp float;
  layout(location=0) in vec3 a_pos;
  layout(location=1) in vec3 a_vel;
  layout(location=2) in float a_phase;
  uniform mat4 u_proj, u_view;
  uniform float u_time;
  out float v_alpha;
  void main(){
    vec3 p = a_pos;
    float t = u_time*0.0015 + a_phase;
    float r = length(p.xy) + 0.3*sin(t*2.1);
    float ang = atan(p.y,p.x) + 0.25*t;
    vec2 xy = vec2(cos(ang), sin(ang)) * r;
    xy += a_vel.xy * sin(t*3.0)*0.15;
    float z = p.z + a_vel.z * cos(t*1.7)*0.25;
    vec3 pos = vec3(xy, z);
    gl_Position = u_proj * u_view * vec4(pos, 1.0);
    float size = 2.0 + 3.0/(0.25+ (pos.z*pos.z));
    gl_PointSize = size;
    v_alpha = clamp(0.25 + 0.75/(1.0+abs(pos.z)), 0.2, 0.95);
  }`;
  const FRAG = `#version 300 es
  precision mediump float; in float v_alpha; out vec4 o;
  void main(){
    vec2 uv = gl_PointCoord*2.0-1.0;
    float d = dot(uv,uv);
    float a = smoothstep(1.0, 0.0, d) * v_alpha;
    vec3 col = mix(vec3(0.168,0.424,1.0
